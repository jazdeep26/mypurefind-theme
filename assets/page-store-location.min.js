var map,BlsCreateMapStoreLocation={init:function(){mapboxgl.accessToken="pk.eyJ1Ijoia2hpZW1waGFtIiwiYSI6ImNsam01eHhnaTAyNmczZmxzcnQ1MTVqN3gifQ.WVqIQlSk52FSN8W7G5gsnw",map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:[-77.04,38.907],zoom:12,pitch:60,bearing:0});const e=document.querySelectorAll(".store-infor__items"),t={type:"FeatureCollection",features:Array.from(e).map(e=>({type:"Feature",geometry:{type:"Point",coordinates:[Number(e.dataset?.lng),Number(e.dataset?.lat)]},properties:{phone:e.dataset.phone,address:e.dataset.address,name:e.dataset.name}}))};t.features.forEach((e,t)=>{e.properties.id=`store_${t}`}),map.on("load",()=>{map.addSource("places",{type:"geojson",data:t})}),map.addControl(new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl}),"top-left"),this.addMarker(t),this.storeInforAction(t)},addMarker:function(e){e.features.forEach(e=>{const t=document.createElement("div");t.id=`marker-${e.properties.id}`,t.addEventListener("click",t=>{this.createPopupMarker(e),this.zoomMarker(e)}),t.classList.add("marker"),new mapboxgl.Marker(t,{offset:[0,-23]}).setLngLat(e.geometry.coordinates).addTo(map)})},createPopupMarker:function(e){const t=document.getElementsByClassName("mapboxgl-popup");t[0]&&t[0].remove();const{address:o,phone:a,name:r}=e.properties;new mapboxgl.Popup({closeOnClick:!1}).setLngLat(e.geometry.coordinates).setHTML(`<h3>${r}</h3><div>${o}<br>${a}</div>`).addTo(map)},zoomMarker:function(e){map.flyTo({center:e.geometry.coordinates,zoom:15})},storeInforAction:function(e){document.querySelectorAll(".store-infor__items a").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();const o=t.currentTarget;o.closest(".store-infor__items").classList.contains("store-active")?o.closest(".store-infor__items").classList.remove("store-active"):(document.querySelectorAll(".store-infor__items").forEach(e=>{e.classList.remove("store-active")}),o.closest(".store-infor__items").classList.add("store-active"));const a=e.features.find(e=>o.id===`infor-${e.properties.id}`);this.createPopupMarker(a),this.zoomMarker(a)})})}};BlsCreateMapStoreLocation.init();